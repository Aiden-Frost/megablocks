run_name: megablocks-matmul-benchmark
image: mosaicml/llm-foundry:2.0.1_cu118-latest
cluster: r9z1
gpu_num: 1
gpu_type: h100_80gb
integrations:
  - integration_type: git_repo
    git_repo: stanford-futuredata/megablocks
    git_branch: main
    pip_install: mosaicml-turbo==0.0.4 absl-py
    ssh_clone: false
command: |-
  cd megablocks
  pip install 'git+https://github.com/openai/triton.git@787cdff#egg=triton&subdirectory=python'
  pip install git+https://github.com/stanford-futuredata/stk.git@main --no-dependencies
  pip install . --no-dependencies
  python megablocks/ops/matmul_benchmark.py
